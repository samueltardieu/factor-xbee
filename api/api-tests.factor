USING: accessors byte-arrays xbee.api kernel strings tools.test ;

[ T{ modem-status f 2 } ]
[ B{ 0x8a 0x2 } frame>message ] unit-test

[ T{ rx f "ST" 48 0 "Foo" } ]
[ B{ 0x81 0x53 0x54 0x30 0x0 0x46 0x6f 0x6f }
  frame>message [ >string ] change-source [ >string ] change-data ] unit-test

[ T{ rx f "MYSENDER" 20 4 "Foo" } ]
[ B{ 0x80 0x4d 0x59 0x53 0x45 0x4e 0x44 0x45 0x52
     0x14 0x4 0x46 0x6f 0x6f }
  frame>message [ >string ] change-source [ >string ] change-data ] unit-test

[ B{ 0x7e 0x0 0x8 0x1
     0x9 0x53 0x54 0x0 0x46 0x6f 0x6f 0x2a } ]
[ "Foo" "ST" <tx-request> 9 >>id message>frame ] unit-test

[ B{ 0x7e 0x0 0xe 0x0 0x0 0x4d 0x59 0x53
     0x45 0x4e 0x44 0x45 0x52 0x0
     0x46 0x6f 0x6f 0x74 } ]
[ "Foo" "MYSENDER" <tx-request> message>frame ] unit-test

[ "Foo" "MYSENDE" <tx-request> message>frame ] [ bad-address? ] must-fail-with
